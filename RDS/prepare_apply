import requests
import sys
from pprint import pprint

#requests.packages.urllib3.disable_warnings()

appliance_name = "dmc3.ginniemae.cloud"
bearer_token = "70baa440-2e99-4652-9249-9977b5fbf93b"


def execute_rest(method, url, bearer_token, data):
    headers = {
        'Authorization': 'BEARER ' + bearer_token + '',
        'Content-Type': 'application/json'
    }
    
    response = requests.request(method, url, headers=headers, data=data)
    json = response.json()

    #pprint(json)
    return json
 

def get_vars(appliance_name, bearer_token):
    url = "https://"+appliance_name+"/api/apps/1314/prepare-apply"
    data = ({
      "templateParameter": {
        "apply_immediately": False
      }
    })
    response = execute_rest("POST", url, bearer_token, data)
    #json = response
    #pprint(response)
    pprint (response['data']['templateParameter'])
    (response['data']['templateParameter']['apply_immediately']) = 'true'
    pprint (response['data']['templateParameter'])
    #return json


get_vars(appliance_name, bearer_token)
